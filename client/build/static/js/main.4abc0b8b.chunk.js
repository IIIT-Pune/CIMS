(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{16:function(e,t,s){},30:function(e,t,s){},31:function(e,t,s){},52:function(e,t,s){},53:function(e,t,s){},54:function(e,t,s){},55:function(e,t,s){},56:function(e,t,s){"use strict";s.r(t);var a=s(1),n=s.n(a),c=s(25),r=s.n(c),i=(s(30),s(3)),l=s(8),o=s(2),u=(s(31),s(9)),j=s(7),d=s(6),b=s.n(d),m=s(10),O=s(14),p=s.n(O),h="http://localhost:8000/api/user",x=function(){var e=Object(m.a)(b.a.mark((function e(t){var s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.post("".concat(h,"/register"),t);case 3:s=e.sent,alert("Successfully registered ".concat(t.email)),400===s.status?alert("User already registered"):401===s.status?alert("Invalid email or password OR User already registered"):402===s.status&&alert("Validtion error: ".concat(s.data.err)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(m.a)(b.a.mark((function e(t,s){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.post("".concat(h,"/login"),t);case 3:a=e.sent,window.localStorage.setItem("token",a.data),400===a.status?alert("Invalid email or password OR User not Registered"):401===a.status?alert("Invalid email or password"):402===a.status&&alert("User not registered"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,s){return e.apply(this,arguments)}}(),v=function(){var e=Object(m.a)(b.a.mark((function e(){var t,s,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.localStorage.getItem("token"),e.prev=1,e.next=4,p.a.get(h,{headers:{"auth-token":t}});case 4:return s=e.sent,a=s.data.user,e.abrupt("return",a);case 9:return e.prev=9,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",{});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),f=function(e,t){var s=Object(o.g)(),n=Object(a.useState)({}),c=Object(i.a)(n,2),r=c[0],l=c[1],d=Object(a.useState)(!1),b=Object(i.a)(d,2),m=b[0],O=b[1],p=Object(a.useState)({email:"",password:""}),h=Object(i.a)(p,2),x=h[0],f=h[1];return{handleChange:function(e){var t=e.target,s=t.name,a=t.value;f(Object(j.a)(Object(j.a)({},x),{},Object(u.a)({},s,a)))},handleSubmit:function(a){a.preventDefault(),l(e(x)),Object.keys(r).length||(g(x),setTimeout((function(){var e=v(x);t(e),s("app")}),3e3)),m||window.localStorage.clear(),f({email:"",password:""})},values:x,errors:r,keepLog:m,setKeepLog:O}},w=function(e){var t={};return e.password?e.password.length<6?t.password="Password must be at least 6 characters":"123123"!==e.password&&(t.password="Password incorrect"):t.password="Password is required",t},N=function(e){var t={};return e?/\d+/.test(e)?6!==e.length&&(t.code="MIS must be 6 digits"):t.code="MIS must be a number":t.code="PassCode is required",t},S=function(e){var t={};return e.email.trim()?/^[a-zA-Z0-9._%+-]+@(?!gmail.com)(?!yahoo.com)(?!hotmail.com)(?!yahoo.co.in)(?!aol.com)(?!live.com)(?!outlook.com)[a-zA-Z0-9_-]+.[a-zA-Z0-9-.]{2,61}$/.test(e.email.trim())||(t.email="Enter College email only"):t.email="Email is required",e.password?e.password.length<6&&(t.password="Password must be at least 6 characters"):t.password="Password is required",t},C=function(e){console.log(e);var t={},s=/\d+/;return e.mis.trim()?s.test(e.mis.trim())?9!==e.mis.trim().length&&(console.log(e.mis.trim()),t.mis="MIS must be 9 digits"):(console.log(!s.test(e.mis.trim())),t.mis="MIS must be a number"):(console.log(e.mis.trim()),console.log(!e.mis.trim()),t.mis="MIS is required"),e.email.trim()?/^[a-zA-Z0-9._%+-]+@(?!gmail.com)(?!yahoo.com)(?!hotmail.com)(?!yahoo.co.in)(?!aol.com)(?!live.com)(?!outlook.com)[a-zA-Z0-9_-]+.[a-zA-Z0-9-.]{2,61}$/.test(e.email.trim())||(t.email="Enter College email only"):t.email="Email is required",e.password?e.password.length<6&&(t.password="Password must be at least 6 characters"):t.password="Password is required",t},k=s(0),I=function(e){var t=e.setIsLogin,s=e.setUser,a=f(S,s),n=a.handleChange,c=a.handleSubmit,r=a.values,i=a.errors,l=a.keepLog;a.setKeepLog;return Object(k.jsxs)("div",{className:"login-card card",children:[Object(k.jsx)("div",{className:"title",children:"Log in"}),Object(k.jsxs)("form",{action:"",onSubmit:c,children:[Object(k.jsxs)("label",{children:[Object(k.jsx)("span",{children:"College Email-ID"}),Object(k.jsx)("input",{type:"email",name:"email",placeholder:"College Email-ID",onChange:n,value:r.email})]}),i.email&&Object(k.jsx)("span",{className:"error",children:i.email}),Object(k.jsxs)("label",{children:[Object(k.jsx)("span",{children:"Password"}),Object(k.jsx)("input",{type:"password",name:"password",placeholder:"Password",onChange:n,value:r.password})]}),i.password&&Object(k.jsx)("span",{className:"error",children:i.password}),Object(k.jsxs)("label",{className:"toggle",children:[Object(k.jsx)("input",{type:"checkbox",value:l,name:"loggedin"}),Object(k.jsx)("span",{children:"Keep me logged in"})]}),Object(k.jsx)("input",{className:"submit",type:"submit",value:"Login"})]}),Object(k.jsxs)("div",{className:"link",children:["Haven't Registered?",Object(k.jsx)("span",{onClick:function(){return t(!1)},children:"Register Here"})]})]})},y=function(e,t){var s=Object(o.g)(),n=Object(a.useState)({}),c=Object(i.a)(n,2),r=c[0],l=c[1],d=Object(a.useState)({email:"",mis:"",password:""}),b=Object(i.a)(d,2),m=b[0],O=b[1];return{handleChange:function(e){var t=e.target,s=t.name,a=t.value;O(Object(j.a)(Object(j.a)({},m),{},Object(u.a)({},s,a)))},handleSubmit:function(a){a.preventDefault(),l(e(m)),Object.keys(r).length||(x(m),setTimeout((function(){g({email:m.email,password:m.password}),setTimeout((function(){var e=v(m);t(e),s("app")}),2e3),O({email:"",mis:"",password:""})}),3e3))},values:m,errors:r}},L=function(e){var t=e.setIsLogin,s=e.setUser,a=y(C,s),n=a.handleChange,c=a.handleSubmit,r=a.values,i=a.errors;return Object(k.jsxs)("div",{className:"register-card card",children:[Object(k.jsx)("div",{className:"title",children:"Register"}),Object(k.jsxs)("form",{action:"",onSubmit:c,children:[Object(k.jsxs)("label",{children:[Object(k.jsx)("span",{children:"College Email-ID"}),Object(k.jsx)("input",{type:"email",name:"email",placeholder:"College Email-ID",onChange:n,value:r.email})]}),Object(k.jsx)("span",{className:"error",children:i.email}),Object(k.jsxs)("label",{children:[Object(k.jsx)("span",{children:"MIS"}),Object(k.jsx)("input",{type:"text",name:"mis",placeholder:"MIS",onChange:n,value:r.mis})]}),Object(k.jsx)("span",{className:"error",children:i.mis}),Object(k.jsxs)("label",{children:[Object(k.jsx)("span",{children:"Password"}),Object(k.jsx)("input",{type:"password",name:"password",placeholder:"Password",onChange:n,value:r.password})]}),Object(k.jsx)("span",{className:"error",children:i.password}),Object(k.jsx)("input",{className:"submit",type:"submit",value:"Register"})]}),Object(k.jsxs)("div",{className:"link",children:["Already Registered?",Object(k.jsx)("span",{onClick:function(){return t(!0)},children:"Login Here"})]})]})},P=(s(52),function(e){var t=e.isLogin,s=e.setIsLogin,a=e.setUser;return Object(k.jsxs)("div",{className:"auth",children:[Object(k.jsx)("section",{className:"logo",children:Object(k.jsx)("img",{src:"./assets/logo_cims.png",alt:"CIMS logo"})}),Object(k.jsx)("section",{className:"auth-section",children:t?Object(k.jsx)(I,{setIsLogin:s,setUser:a}):Object(k.jsx)(L,{setIsLogin:s,setUser:a})})]})}),M=(s(53),function(e){var t=e.user;return Object(k.jsx)("div",{className:"nf",children:Object(k.jsxs)("div",{className:"n404",children:[Object(k.jsx)("section",{className:"picture",children:Object(k.jsx)("img",{src:"./assets/n404.png",alt:"404"})}),Object(k.jsxs)("div",{className:"right",children:[Object(k.jsx)("section",{className:"text",children:Object(k.jsx)("p",{children:"Look like you are lost!"})}),Object(k.jsx)("section",{className:"btns",children:Object.keys(t).length?Object(k.jsx)(l.b,{to:"/app",children:"To Home"}):Object(k.jsx)(l.b,{to:"/",children:"Go back here"})})]})]})})}),U=(s(54),function(e){var t=e.page,s=e.setPage,n=e.user,c=e.setUser,r=e.setIsLoggedIn,l=Object(a.useState)(""),u=Object(i.a)(l,2),j=u[0],d=u[1],b=function(e,t){var s=Object(o.g)();return{logout:function(){e({}),window.localStorage.clear(),t(!1),s("/")}}}(c,r).logout;return Object(a.useEffect)((function(){if(void 0!==n.email){var e,t,s=(null===(e=n.email)||void 0===e?void 0:e.split("@"))[0];s=null===(t=s)||void 0===t?void 0:t.replace(/\d/g,""),d(s)}else d("Student")}),[n.email]),Object(k.jsxs)("div",{className:"sidebar",children:[Object(k.jsxs)("section",{className:"user",children:[Object(k.jsx)("div",{className:"name",children:j}),Object(k.jsx)("div",{className:"mis",children:n.mis})]}),Object(k.jsx)("section",{className:"nav-links",children:Object(k.jsxs)("ul",{children:[Object(k.jsx)("li",{className:"net"===t?"link active":"link",onClick:function(){return s("net")},children:"Internet Access"}),Object(k.jsx)("li",{className:"att"===t?"link active":"link",onClick:function(){return s("att")},children:"Attendence"}),Object(k.jsx)("li",{className:"io"===t?"link active":"link",onClick:function(){return s("io")},children:"College in-out"}),Object(k.jsx)("li",{className:"lib"===t?"link active":"link",onClick:function(){return s("lib")},children:"Library"})]})}),Object(k.jsxs)("section",{className:"logo",children:[Object(k.jsx)("img",{src:"./assets/logo_cims_clear.png",alt:"logo"}),Object(k.jsx)("button",{onClick:b,children:"Logout"})]})]})}),E=function(e,t,s){var n=Object(a.useState)({}),c=Object(i.a)(n,2),r=c[0],l=c[1],o=Object(a.useState)({mis:t.mis,password:""}),d=Object(i.a)(o,2),b=d[0],m=d[1];return{handleChange:function(e){var t=e.target,s=t.name,a=t.value;m(Object(j.a)(Object(j.a)({},b),{},Object(u.a)({},s,a)))},handleSubmit:function(a){a.preventDefault(),l(e(b)),Object.keys(r).length&&s(!0),m({mis:t.mis,password:""})},values:b,errors:r}},A=(s(16),function(e){var t=e.user,s=e.connectionStatus,a=e.setConnectionStatus,n=E(w,t,a),c=n.handleChange,r=n.handleSubmit,i=n.values,l=n.errors;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("section",{className:"info-text",children:"Enter your MIS and passwords here to access the internet."}),Object(k.jsx)("section",{className:"auth-card",children:Object(k.jsxs)("div",{className:"card",children:[Object(k.jsxs)("form",{onSubmit:r,children:[Object(k.jsxs)("label",{children:[Object(k.jsx)("span",{children:"MIS"}),Object(k.jsx)("input",{type:"text",value:i.mis,name:"mis",onChange:c,placeholder:"MIS",disabled:!0})]}),l.mis&&Object(k.jsx)("span",{className:"error",children:l.mis}),Object(k.jsxs)("label",{children:[Object(k.jsx)("span",{children:"Password"}),Object(k.jsx)("input",{type:"password",value:i.password,name:"password",onChange:c,placeholder:"Password"})]}),l.password&&Object(k.jsx)("span",{className:"error",children:l.password}),Object(k.jsx)("input",{className:"submit",id:s?"disabled submit":"submit",type:"submit",value:"Connect"})]}),Object(k.jsx)("div",{className:"badge ".concat(s?"success":"danger"),children:s?"O - Connected":"X - Not Connected"})]})})]})}),R=function(){return Object(k.jsx)("div",{className:"wip",children:"Work In Progress"})},D=function(e,t,s,n){var c=Object(a.useState)({}),r=Object(i.a)(c,2),l=r[0],o=r[1],u=Object(a.useState)(""),j=Object(i.a)(u,2),d=j[0],b=j[1];return{handleChange:function(e){var t=e.target.value;b(t)},handleSubmit:function(t){t.preventDefault(),o(e(d)),Object.keys(l).length||s(!n),b("")},code:d,errors:l}},q=function(e){var t=e.user,s=e.inClass,a=e.setInClass,n=D(N,t,a,s),c=n.handleChange,r=n.handleSubmit,i=n.code,l=n.errors;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)("section",{className:"info-text",children:["Enter the PassCode Shared by the instructor here ",Object(k.jsx)("br",{}),"and mark in yourself."]}),Object(k.jsx)("section",{className:"att-card",children:Object(k.jsxs)("div",{className:"card",children:[Object(k.jsxs)("form",{onSubmit:r,children:[Object(k.jsxs)("label",{children:[Object(k.jsx)("span",{children:"PassCode"}),Object(k.jsx)("input",{type:"text",value:i,name:"mis",onChange:c,placeholder:"Code"})]}),l.code&&Object(k.jsx)("span",{className:"error",children:l.code}),s?Object(k.jsx)("input",{className:"submit",id:"submit-danger",type:"submit",value:"Mark Out"}):Object(k.jsx)("input",{className:"submit",id:"submit-success",type:"submit",value:"Mark In"})]}),s&&Object(k.jsx)("div",{className:"badge success",children:"You are in a class"})]})})]})},_=function(e){e.user;var t=e.inCampus,s=e.setInCampus;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)("section",{className:"info-text",children:["MARK IN if coming in the campus ",Object(k.jsx)("br",{}),"MARK OUT if leaving the campus"]}),Object(k.jsx)("section",{className:"io-card",children:Object(k.jsxs)("div",{className:"card",children:[Object(k.jsx)("form",{onSubmit:function(e){e.preventDefault(),s(!t)},children:t?Object(k.jsx)("input",{className:"submit",id:"submit-warning",type:"submit",value:"Mark Out"}):Object(k.jsx)("input",{className:"submit",id:"submit-success",type:"submit",value:"Mark In"})}),Object(k.jsx)("div",{className:"badge ".concat(t?"success":"warning"),children:t?"You are in Campus":"You are not in Campus"})]})})]})},z=(s(55),function(e){var t=e.user,s=e.setUser,n=e.setIsLoggedIn,c=Object(a.useState)("net"),r=Object(i.a)(c,2),l=r[0],o=r[1],u=Object(a.useState)(!1),j=Object(i.a)(u,2),d=j[0],O=j[1],p=Object(a.useState)(!1),h=Object(i.a)(p,2),x=h[0],g=h[1],f=Object(a.useState)(!0),w=Object(i.a)(f,2),N=w[0],S=w[1],C=function(){var e=Object(m.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v();case 3:t=e.sent,console.log("data ->",t),s(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){C()}),[]),Object(k.jsxs)("main",{children:[Object(k.jsx)(U,{page:l,setPage:o,user:t,setUser:s,setIsLoggedIn:n}),Object(k.jsx)("section",{className:"content",children:function(){switch(l){case"net":return Object(k.jsx)(A,{user:t,connectionStatus:d,setConnectionStatus:O});case"lib":return Object(k.jsx)(R,{user:t});case"att":return Object(k.jsx)(q,{user:t,inClass:x,setInClass:g});case"io":return Object(k.jsx)(_,{user:t,inCampus:N,setInCampus:S});default:return Object(k.jsx)(A,{user:t,connectionStatus:d,setConnectionStatus:O})}}()})]})}),Z=function(){var e=Object(a.useState)(!0),t=Object(i.a)(e,2),s=t[0],n=t[1],c=Object(a.useState)({}),r=Object(i.a)(c,2),u=r[0],j=r[1],d=Object(a.useState)(!1),b=Object(i.a)(d,2),m=b[0],O=b[1];return Object(a.useEffect)((function(){null!==window.localStorage.getItem("token")&&O(!0)}),[m]),Object(k.jsx)("div",{className:"App",children:Object(k.jsx)(l.a,{children:Object(k.jsxs)(o.d,{children:[Object(k.jsx)(o.b,{path:"*",element:Object(k.jsx)(M,{user:u})}),m?Object(k.jsx)(o.b,{path:"/",element:Object(k.jsx)(o.a,{replace:!0,to:"/app"})}):Object(k.jsx)(o.b,{path:"/",element:Object(k.jsx)(P,{isLogin:s,setIsLogin:n,setUser:j}),exact:!0}),Object(k.jsx)(o.b,{path:"/app",exact:!0,element:Object(k.jsx)(z,{user:u,setUser:j,setIsLoggedIn:O})})]})})})};r.a.render(Object(k.jsx)(n.a.StrictMode,{children:Object(k.jsx)(Z,{})}),document.getElementById("root"))}},[[56,1,2]]]);
//# sourceMappingURL=main.4abc0b8b.chunk.js.map